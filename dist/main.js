(()=>{"use strict";const e=e=>{if(e<2||e>5)return;const t=new Array(e);for(let e=0;e<t.length;e++)t[e]=!1;return{id:void 0,axis:void 0,firstRow:void 0,firstColumn:void 0,length:e,hit:e=>{t[e]=!0},isSunk:()=>{for(let e=0;e<t.length;e++)if(!1===t[e])return!1;return!0}}},t=(e,t)=>Math.floor(Math.random()*(t-e))+e,n=()=>["x","y"][t(0,2)],r=r=>{const o=(e=>{const t=new Array(e);for(let n=0;n<t.length;n++)t[n]=new Array(e).fill("");let n=[],r=[];return{rows:t,allShips:n,missedShots:r,placeShip:(r,o,l,s)=>{if(r.axis=o,r.firstRow=l,r.firstColumn=s,(t=>{if("x"===t.axis){if(t.firstColumn+t.length-1>=e)return!0}else if("y"===t.axis&&t.firstRow+t.length-1>=e)return!0;return!1})(r)||(e=>{if("x"===e.axis){const n=e.firstRow,r=e.firstColumn+e.length-1;for(let o=e.firstColumn;o<=r;o++)if(""!=t[n][o])return!0}else if("y"===e.axis){const n=e.firstRow+e.length-1,r=e.firstColumn;for(let o=e.firstRow;o<=n;o++)if(""!=t[o][r])return!0}return!1})(r))return"Invalid position";if(n.push(r),r.id=n.length-1,"x"===o){const e=l,n=s+r.length-1;for(let o=s;o<=n;o++)t[e][o]=`S${r.id}`}else if("y"===o){const e=s,n=l+r.length-1;for(let o=l;o<=n;o++)t[o][e]=`S${r.id}`}},receiveAttack:(e,o)=>{const l=t[e][o];if("S"===l[0]){const r=l.slice(1),s=n[r];t[e][o]=`X${r}`;const i=((e,t,n)=>{const r=n.firstRow,o=n.firstColumn;let l=0;if("x"===n.axis){const e=o+n.length-1;for(let n=o;n<=e;n++){if(n===t)return l;l++}}else if("y"===n.axis){const t=r+n.length-1;for(let n=r;n<=t;n++){if(n===e)return l;l++}}})(e,o,s);return s.hit(i),"Success!"}{const t=((e,t)=>({row:e,column:t}))(e,o);return r.push(t),"Missed"}},allShipsSunk:()=>{for(let e=0;e<n.length;e++)if(!1===n[e].isSunk())return!1;return!0}}})(10),l=[],s=(e,t,n)=>{if(l.push([t,n]),e.receiveAttack(t,n),e.allShipsSunk())return`${r} won!`};return{name:r,board:o,allPlays:l,attackEnemyBoard:s,placeShipsRandomly:()=>{const r=[e(5),e(4),e(3),e(3),e(2)];for(let e=0;e<r.length;e++){const l=r[e],s=n(),i=t(0,10),a=t(0,10);let c=o.placeShip(l,s,i,a);for(;"Invalid position"===c;){const e=n(),r=t(0,10),s=t(0,10);c=o.placeShip(l,e,r,s)}}},randomPlay:e=>{let n=t(0,10),r=t(0,10);for(;l.includes([n,r]);)n=t(0,10),r=t(0,10);s(e,n,r)}}},o=e=>{const t=e.board.allShips,n=document.getElementsByClassName("square"),r=[];if("computer"===e.name.toLowerCase())for(let e=100;e<200;e++)r.push(n[e]);else for(let e=0;e<100;e++)r.push(n[e]);for(let e=0;e<t.length;e++){const n=t[e],o=10*n.firstRow+n.firstColumn;let l;if("x"===n.axis){l=o+n.length-1;for(let e=o;e<=l;e++)r[e].style.backgroundColor="green"}else if("y"===n.axis){l=o+10*n.length-1;for(let e=o;e<=l;e+=10)r[e].style.backgroundColor="green"}}};document.getElementById("new-game-btn").addEventListener("click",(()=>{(()=>{const e=document.getElementById("player-name").value;if("computer"===e.toLowerCase())return alert("C'mon, you're not the computer! Try again."),void(document.getElementById("player-name").value="");const t=r(e),n=r("Computer");t.placeShipsRandomly(),n.placeShipsRandomly(),((e,t)=>{document.getElementById("new-game").style.display="none";const n=document.getElementById("container");n.style.display="grid";const r=document.createElement("div");r.className="board",r.id="player-board";const l=document.createElement("div");l.className="board",l.id="computer-board";const s=[r,l];for(let e=0;e<s.length;e++){const t=s[e];n.append(t),t.style.display="grid";for(let e=0;e<100;e++){const e=document.createElement("div");e.className="square",t.append(e)}}o(e),o(t)})(t,n)})()}))})();